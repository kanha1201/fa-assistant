# Fundamental Analysis Assistant

An AI-powered chatbot designed to help users analyze financial statements, evaluate company fundamentals, and understand investment metrics. Built as an internal tool for financial analysis, the chatbot provides insights on quarterly results, bull/bear cases, red flags, and benchmark comparisons.

## ğŸ¯ Overview

The Fundamental Analysis Assistant (Tensor) is a specialized AI chatbot that helps users understand company financials without the complexity of reading lengthy reports. It fetches data from verified sources, stores it in a structured format, and uses Google's Gemini AI to provide clear, actionable insights.

## ğŸ—ï¸ Architecture

### System Components

1. **Data Ingestion Pipeline**: Extracts and processes financial data from multiple sources
2. **Knowledge Base**: SQLite database storing company metrics and processed documents
3. **LLM Integration**: Google Gemini API for generating intelligent responses
4. **Backend API**: RESTful API serving chatbot endpoints
5. **Frontend UI**: Mobile-first React interface for user interaction

## ğŸ”§ Technology Stack

### Backend
- **Programming Language**: Python 3.9+
- **Framework**: Built-in `http.server` (standalone implementation)
- **Database**: SQLite3 (built-in Python library)
- **LLM**: Google Gemini API (via `urllib`)
- **Data Processing**: Built-in Python libraries (`json`, `sqlite3`, `urllib`)

### Frontend
- **Programming Language**: JavaScript (ES6+)
- **Framework**: React (via CDN)
- **Styling**: Tailwind CSS (via CDN)
- **Icons**: Lucide React (via CDN)
- **HTTP Client**: Axios (via CDN)
- **Build**: Standalone HTML (no build process required)

## ğŸ“Š How It Works

### 1. Data Ingestion & Storage

The chatbot maintains a knowledge base of financial data:

- **Database (`data/financial_data.db`)**: Stores structured financial metrics
  - Company information (name, sector)
  - Financial metrics (P/E ratio, Market Cap, Debt/Equity, ROE, EPS, etc.)
  - Period types and sources

- **Processed Documents (`data/processed/ETERNAL/`)**: Contains quarterly results
  - Text files with quarterly report summaries
  - JSON files with structured metrics

### 2. User Query Processing

When a user submits a query:

1. **Guardrails Check**: The system first checks if the query:
   - Is a greeting â†’ Returns friendly greeting
   - Asks for investment advice â†’ Politely declines (non-advisory guardrail)
   - Asks for predictions â†’ Explains it can't predict future prices
   - Requests unavailable data â†’ Informs user data is not available

2. **Context Retrieval**: 
   - Fetches company data from SQLite database
   - Retrieves relevant financial metrics
   - Loads quarterly results text for context

3. **Prompt Construction**:
   - Builds a context-rich prompt with:
     - Company name and sector
     - All available financial metrics
     - Quarterly results summary
     - User's specific question

4. **LLM Processing**:
   - Sends prompt to Google Gemini API
   - Uses model fallback (gemini-2.5-flash â†’ gemini-1.5-flash â†’ gemini-1.5-pro)
   - Receives AI-generated response

5. **Response Formatting**:
   - Applies neutral tone enforcement
   - Adds disclaimers for bull/bear cases and red flags
   - Formats with markdown (bold, bullet points, line breaks)
   - Limits icons to 5 per message for readability

### 3. Specialized Features

#### Summary Feature
- Provides 3-4 line concise summary
- Focuses on performance vs previous periods
- Highlights key drivers and overall assessment

#### Bull/Bear Case Analysis
- Generates bullish arguments with supporting metrics
- Generates bearish concerns with risk factors
- Includes disclaimer: "Generated by AI based on public data. Not a buy/sell recommendation."

#### Red Flags Detection
- Identifies potential concerns in financial metrics
- Categorizes by severity (High/Medium/Low)
- Provides specific metrics and explanations

#### Benchmark Comparison
- Compares company metrics with sector peers
- Provides context on whether metrics are above/below average
- Helps users understand relative performance

### 4. Guardrails & Safety

The chatbot implements multiple guardrails:

1. **Non-Advisory Guardrail**: Refuses to provide buy/sell recommendations
2. **Personalized Firewall**: Never uses "You" in portfolio recommendations
3. **Disclaimer Injection**: Adds disclaimers to all investment-related responses
4. **Citation Imperative**: Links insights to data sources when possible
5. **Neutral Tone**: Avoids emotional language (no "multibagger", "skyrocketing", etc.)
6. **Scope Refusal**: Declines to predict future prices or market movements
7. **Greeting Handling**: Responds politely to greetings
8. **Data Unavailability**: Informs users when data is not available

## ğŸš€ Getting Started

### Prerequisites

- Python 3.9 or higher
- Google Gemini API key
- Modern web browser

### Installation

1. **Clone the repository**:
   ```bash
   git clone https://github.com/kanha1201/fa-assistant.git
   cd fa-assistant
   ```

2. **Set up environment variables**:
   Create a `.env` file in the root directory:
   ```
   GEMINI_API_KEY=your_api_key_here
   ```

3. **Initialize database** (if needed):
   ```bash
   python3 scripts/setup_database.py
   python3 scripts/create_sample_data.py
   ```

### Running the Application

1. **Start the Backend**:
   ```bash
   python3 scripts/run_api_standalone.py
   ```
   The API will run on `http://localhost:8000`

2. **Open the Frontend**:
   - Open `frontend/standalone.html` in your web browser
   - Or navigate to: `file:///path/to/fa-assistant/frontend/standalone.html`

3. **Test the API**:
   ```bash
   curl http://localhost:8000/health
   curl http://localhost:8000/summary
   curl "http://localhost:8000/chat/query?query=What%20is%20the%20stock%20price"
   ```

## ğŸ“¡ API Endpoints

### Health Check
```
GET /health
```
Returns: `{"status": "healthy"}`

### Get Summary
```
GET /summary?company_symbol=ETERNAL
```
Returns company fundamentals summary

### Get Red Flags
```
GET /red-flags?company_symbol=ETERNAL
```
Returns potential red flags with severity indicators

### Get Bull/Bear Case
```
GET /bull-bear?company_symbol=ETERNAL
```
Returns bullish and bearish analysis

### Chat Query
```
GET /chat/query?query=YOUR_QUESTION&company_symbol=ETERNAL
```
Answers any financial question about the company

## ğŸ“ Project Structure

```
fa-assistant/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ financial_data.db          # SQLite database with metrics
â”‚   â””â”€â”€ processed/
â”‚       â””â”€â”€ ETERNAL/              # Processed quarterly results
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ standalone.html           # Standalone React frontend
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ run_api_standalone.py     # Main backend API server
â”‚   â”œâ”€â”€ create_sample_data.py     # Create sample data
â”‚   â”œâ”€â”€ setup_database.py         # Initialize database
â”‚   â””â”€â”€ ingest.py                 # Data ingestion pipeline
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ llm/                      # LLM integration modules
â”‚   â”œâ”€â”€ storage/                  # Database and storage modules
â”‚   â”œâ”€â”€ extractors/               # Web scraping modules
â”‚   â””â”€â”€ utils/                    # Utility modules
â”œâ”€â”€ .env                          # Environment variables
â”œâ”€â”€ requirements.txt              # Python dependencies
â””â”€â”€ README.md                     # This file
```

## ğŸ” Security & Privacy

- API keys stored in `.env` file (not committed to git)
- No user data collection or storage
- All analysis based on publicly available data
- Non-advisory: Never provides investment recommendations

## ğŸ¨ UI Features

- **Dark Mode**: Financial terminal-inspired dark theme
- **Mobile-First**: Optimized for 375px-400px width screens
- **Quick Actions**: One-click access to Summary, Red Flags, Bull/Bear
- **Responsive Design**: Clean, professional interface
- **Real-time Chat**: Instant responses from AI

## ğŸ“ Example Queries

- "What is the stock price of Eternal?"
- "What is the Market Cap of Eternal?"
- "What is the P/E ratio? Compare with sector peers."
- "Summarise the fundamentals of Eternal."
- "Give me a bear and bull opinion description."
- "Highlight the red flags of Eternal."
- "What is the Debt to Equity Ratio?"

## ğŸ¤ Contributing

This is an internal tool. For contributions, please follow the existing code structure and maintain the guardrails for financial advice compliance.

## ğŸ“„ License

Internal use only.

## ğŸ™ Acknowledgments

- Google Gemini API for LLM capabilities
- Groww for design inspiration
- Built for simplifying financial analysis
